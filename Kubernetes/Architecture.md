## Overview
---
![[Pasted image 20250507231252.png]]

## Components
### Control Plane
---

- **kube-apiserver**
    - Kubernetesコントロールプレーンのフロントエンドとして機能する。
    - Kubernetes APIを公開し、内部コンポーネントや外部ユーザーがクラスターと通信するために使用される。
    - RESTリクエストを検証・処理し、クラスターの状態を更新する。
- **etcd**
    - クラスターのすべてのデータを格納する、整合性が高く高可用性なキー・バリュー型ストア。
    - 設定データ、状態情報、メタデータを保存する。
- **kube-scheduler**
    - 新しく作成されたPodを、リソースの利用可能性やその他の制約に基づいてノードに割り当てる。
    - クラスターリソースの効率的な利用を保証する。
- **kube-controller-manager**
    - クラスター内の日常的なタスクを処理するコントローラプロセスを実行する。
    - ノードコントローラ、レプリケーションコントローラ、エンドポイントコントローラなどが含まれ、クラスターの望ましい状態が維持されるようにする。
- **cloud-controller-manager**
    - クラウドプロバイダー固有の制御ロジックを管理し、クラスターが基盤となるクラウドプロバイダーのAPIと連携できるようにする。

### Data Plane
---

- **kubelet**
    - 各ノード上で動作するエージェントで、API サーバーから割り当てられた Pod の **ライフサイクル管理** を担います。
    - 指定されたコンテナイメージをプルし、コンテナを起動・停止・再起動し、正常稼働を監視します。
    - 定期的にノードと Pod のステータスを API サーバーに報告し、障害時には再スケジューリングなどの上位コントローラが動作するトリガーとなります 。
- **kube‑proxy**
    - 各ノード上で動作するネットワークプロキシで、**Service** リソースに定義された仮想 IP（ClusterIP）やポートへのトラフィックを、バックエンドの Pod へルーティングします。
    - iptables や IPVS を用いて負荷分散ルールを作成し、ノード内外からのリクエストを適切な Pod に転送します。
    - Service のエンドポイント変更を API サーバーから検知し、動的にルールを更新します 。
- **コンテナランタイム**
    - コンテナの **起動・停止・管理** を担うエンジンで、OCI（Open Container Initiative）準拠のランタイムが利用されます。
    - 代表的なものに containerd、CRI‑O、（旧来は Docker）があり、kubelet は CRI（Container Runtime Interface）を通じてこれらと連携します。
    - Pod が指定したイメージをダウンロードし、OS 上でコンテナを起動してライフサイクルを管理します 。